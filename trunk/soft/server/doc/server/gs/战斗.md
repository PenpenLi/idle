## FightManager

---

初始化

比较先手

更新状态（buff 是否有死亡）

判断结束（一方死亡 到达最大战斗时间）

---

## FightPlayer

状态/服务端：0 没有写 1 完成部分 2 完成 3 需求不明确待定

---

### 公共方法

| 方法名                 | 方法用途                     | 方法解析                 | 状态 |      |
| ---------------------- | :--------------------------- | :----------------------- | ---- | ---- |
| CreatePlayer           | 玩家初始化                   |                          | 2    | 0    |
| CreateMonster          | 怪物初始化                   |                          | 2    | 0    |
| CreateGagPlayer        | 对手玩家初始化               |                          | 0    | 0    |
| get_attack_attrid      | 获取玩家攻击类别伤害抵抗属性 | 物理/魔法                | 2    | 0    |
| get_race_attrid        | 获取玩家攻击形态伤害抵抗属性 | 人形/野兽/恶魔           | 2    | 0    |
| get_element_attrid     | 获取玩家元素伤害抵抗属性     | 闪电/冰冷/火焰/大地      | 1    | 0    |
| convert_value_to_per   | 数值转化                     | 转化为百分比             | 2    | 0    |
| convert_per_to_realper | 攻速 吟唱计算                | 通过百分比转化为具体数值 | 2    | 0    |

---

### 内部方法

| 方法名             | 方法用途                 | 方法解析                  | 状态 |      |
| ------------------ | :----------------------- | :------------------------ | ---- | ---- |
| Init               | 战斗角色初始化           |                           | 2    | 0    |
| PostInit           | 战斗角色初始化补充       |                           | 2    | 0    |
| Destroy            | 表现销毁                 |                           | 2    | 0    |
| SetTarget          | 将敌方类赋值到对象中     |                           | 2    | 0    |
| AttachEnd          | 技能结束                 | 移除附能                  | 3    | 0    |
| DoBreakSing        | 打断技能吟唱             |                           | 2    | 0    |
| DoSpell            | 释放技能以及计算冷却     |                           | 2    | 0    |
| ReleaseSpell       | 按键释放技能（存在问题） |                           | 2    | 0    |
| CalcHit            | 计算命中率               |                           | 2    | 0    |
| CalcDamageIncrease | 计算伤害                 | 增伤减伤 伤害和抵抗       | 2    | 0    |
| CalcCritDamage     | 计算暴击                 | 是否暴击 以及暴击伤害     | 2    | 0    |
| CalcRaceDamage     | 计算种族伤害             | 种族伤害和抵抗            | 2    | 0    |
| CalcElementDamage  | 计算元素伤害（待修改）   |                           | 1    | 0    |
| CalcASDamage       | 计算技能/普攻伤害        | 技能增伤减伤 普攻增伤减伤 | 2    | 0    |
| BuffEffect         | buff修改属性             |                           | 2    | 0    |
| BuffCheck          | buff检验                 |                           | 2    | 0    |
| Hurt               | 造成伤害计算             | 最后确认                  | 2    | 0    |
| Attack             | 普攻                     |                           | 2    | 0    |
| Spell              | 技能                     |                           | 2    | 0    |
| AddBuff            | 加buff                   |                           | 2    | 0    |
| RemoveBuff         | 移除buff                 |                           | 2    | 0    |
| Buff               | buff清除判断             |                           | 2    | 0    |
| IsDie              | 是否死亡                 |                           | 2    | 0    |
| Update             | 刷新状态                 | sp buff 眩晕              | 2    | 0    |
|                    | 护盾                     |                           | 0    | 0    |
|                    | 眩晕沉默                 |                           | 0    | 0    |
|                    | 技能附加生命             |                           | 0    | 0    |
|                    | 真实伤害                 | 不算增伤减伤              | 0    | 0    |
|                    | 技能无视防御             | 算上增伤减伤              | 0    | 0    |
|                    | 战神                     |                           | 0    | 0    |
|                    |                          |                           |      |      |

---



护盾 血量计算

真实伤害

技能无视防御

技能附加生命

战神

怒气计算

天赋



